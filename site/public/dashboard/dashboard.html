<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>DigitalTherm</title>
        <link rel="stylesheet" href="../css/dashboard.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,700;1,500&display=swap" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://kit.fontawesome.com/yourcode.js" crossorigin="anonymous"></script>
    </head>
    <body>
        <header class="container-nav">
            <img src="../assets/digitalTherm.png" class="logo" alt="">
            <ul class="navbar">
                <li>Estátistica</li>
                <li>Sair</li>
            </ul>
        </header>
        <div class="metricas">
            <div class="quadrado-alertas">
                <button onclick="abrirModal1()" class="alertas altBom">Ver mais</button>
                <p class="desc-alertas"> - BOM</p>
            </div>
            <div class="quadrado-alertas">
                <button onclick="abrirModal2()" class="alertas altAtencao">Ver mais</button>
                <p class="desc-alertas"> - ATENÇÃO</p>
            </div>
            <div class="quadrado-alertas">
                <button onclick="abrirModal3()" class="alertas altCuidado">Ver mais</button>
                <p class="desc-alertas"> - CUIDADO</p>
            </div>
            <div class="quadrado-alertas">
                <button onclick="abrirModal4()" class="alertas altUrgente">Ver mais</button>
                <p class="desc-alertas"> - URGENTE</p>
            </div>
        </div>
        <div id="fundo_modal1" class="fundo-modal">
            <div class="modal" id="modal1">
                <div class="fechar">
                    <button onclick="fecharModal1()" class="btn-sair">X</button>
                </div>
                <div class="title-modal"><h2>Temperatura</h2></div>
                <div class="conteudo-modal">
                    <div class="info-modal">
                        <div class="cor-alerta-modal modal-verde"></div>
                        <p>Para a temperatura estar em um alerta bom é necessário que ela esteja <br> entre 18° a 20°</p>
                    </div>
                </div>
                <div class="title-modal"><h2>Umidade</h2></div>
                <div class="conteudo-modal">
                    <div class="info-modal">
                        <div class="cor-alerta-modal modal-verde"></div>
                        <p>Para a Umidade estar em um alerta bom é necessário que ela esteja <br> entre 40% a 49,5%</p>
                    </div>
                </div>
            </div>
        </div>
        <div id="fundo_modal2" class="fundo-modal">
            <div class="modal" id="modal2">
                <div class="fechar">
                    <button onclick="fecharModal2()" class="btn-sair">X</button>
                </div>
                <div class="title-modal"><h2>Temperatura</h2></div>
                <div class="conteudo-modal">
                    <div class="info-modal">
                        <div class="cor-alerta-modal modal-amarela"></div>
                        <p>Para a temperatura estar em um alerta bom é necessário que ela esteja <br> entre 20,1° a 22,9°</p>
                    </div>
                </div>
                <div class="title-modal"><h2>Umidade</h2></div>
                <div class="conteudo-modal">
                    <div class="info-modal">
                        <div class="cor-alerta-modal modal-amarela"></div>
                        <p>Para a Umidade estar em um alerta bom é necessário que ela esteja <br> entre 49,6% a 57,9%</p>
                    </div>
                </div>
            </div>
        </div>
        <div id="fundo_modal3" class="fundo-modal">
            <div class="modal" id="modal3">
                <div class="fechar">
                    <button onclick="fecharModal3()" class="btn-sair">X</button>
                </div>
                <div class="title-modal"><h2>Temperatura</h2></div>
                <div class="conteudo-modal">
                    <div class="info-modal">
                        <div class="cor-alerta-modal modal-laranja"></div>
                        <p>Para a temperatura estar em um alerta bom é necessário que ela esteja <br> entre 23° a 26,5°</p>
                    </div>
                </div>
                <div class="title-modal"><h2>Umidade</h2></div>
                <div class="conteudo-modal">
                    <div class="info-modal">
                        <div class="cor-alerta-modal modal-laranja"></div>
                        <p>Para a Umidade estar em um alerta bom é necessário que ela esteja <br> entre 58% a 59,9%</p>
                    </div>
                </div>
            </div>
        </div>
        <div id="fundo_modal4" class="fundo-modal">
            <div class="modal" id="modal4">
                <div class="fechar">
                    <button onclick="fecharModal4()" class="btn-sair">X</button>
                </div>
                <div class="title-modal"><h2>Temperatura</h2></div>
                <div class="conteudo-modal">
                    <div class="info-modal">
                        <div class="cor-alerta-modal modal-vermelha"></div>
                        <p>Para a temperatura estar em um alerta bom é necessário que ela esteja <br> acima de 26,6</p>
                    </div>
                </div>
                <div class="title-modal"><h2>Umidade</h2></div>
                <div class="conteudo-modal">
                    <div class="info-modal">
                        <div class="cor-alerta-modal modal-vermelha"></div>
                        <p>Para a Umidade estar em um alerta bom é necessário que ela esteja <br> acima de 60%</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-charts">
            <div class="charts-row1">
                <div class="chart1 bom" id="chart1">
                    <canvas id="myChart"></canvas>
                    <div class="espaco"></div>
                    <div class="div-termometro">
                        <div class="termometro-bom" id="termometro-id1"></div>
                        <img class="img-termometro" src="../assets/termometro.png" alt="">
                    </div>
                </div>
                <div class="chart1 bom" id="chart2">
                    <canvas id="myChart2"></canvas>
                    <div class="espaco"></div>
                    <div class="div-termometro">
                        <div class="termometro-bom" id="termometro-id2"></div>
                        <img class="img-termometro" src="../assets/termometro.png" alt="">
                    </div>
                </div>
            </div>
        </div>
        <div class="charts-row1">
            <div class="chart1">
                <canvas id="myChart3"></canvas>
            </div>
            <div class="chart1">
                <canvas id="myChart4"></canvas>
            </div>
        </div>
    </body>
</html>
<script>
    var termometro1 = document.getElementById("termometro-id1");
    var termometro2 = document.getElementById("termometro-id2");
    var grafico1 = document.getElementById("chart1");
    var grafico2 = document.getElementById("chart2");
   //GRAFICO 1
    const labels = [
        '12:00',
        '12:01',
        '12:02',
        '12:03',
        '12:04',
        'Agora',
    ]

    // DADOS
    var dados = [30, 29, 28, 25, 22, 26.6];
    const data = {
        labels: labels,
        datasets: [{
            label: 'Temperatura',
            backgroundColor: '#f76686',
            borderColor: '#f76686',
            data: dados,
        }]
    }
    // VERIFICAR CORES
    if(dados[5] >= 26.6){
        termometro1.className = termometro1.className.replaceAll("bom","urgente");
        grafico1.className = grafico1.className.replaceAll("chart1 bom","chart1 urgente");
    }
    else if(dados[5] >= 23 && dados[5] <= 26.5){
        termometro1.className = termometro1.className.replaceAll("bom","cuidado");
        grafico1.className = grafico1.className.replaceAll("chart1 bom","chart1 cuidado");
    }
    else if(dados[5] >= 20 && dados[5] <= 22.9){
        termometro1.className = termometro1.className.replaceAll("bom","atencao");
        grafico1.className = grafico1.className.replaceAll("chart1 bom","chart1 atencao");
    }
    
    // CONFIG
    const config = {
        type: 'line',
        data: data,
        options: {
            plugins: {
            title: {
                display: true,
                text: 'Temperatura capturada nos últimos 5 minutos'
            }
        }
        }
    };


    //FIM GRÁFICO1

    //GRÁFICO - 2
    const labels2 = [
        '12:00',
        '12:01',
        '12:02',
        '12:03',
        '12:04',
        'Agora',
    ]

    // DADOS
    var dados2 = [30, 29, 28, 25, 22, 60];
    const data2 = {
        labels: labels2,
        datasets: [{
            label: 'Umidade',
            backgroundColor: '#3E68FF',
            borderColor: '#3E68FF',
            data: dados2,
        }]
    }
    // VERIFICAR CORES
    if(dados2[5] >= 60 || dados2[5] < 35){
        termometro2.className = termometro2.className.replaceAll("bom","urgente");
        grafico2.className = grafico2.className.replaceAll("chart1 bom","chart1 urgente");
    }
    else if(dados2[5] >= 58 && dados2[5] <= 59.9){
        termometro2.className = termometro2.className.replaceAll("bom","cuidado");
        grafico2.className = grafico2.className.replaceAll("chart1 bom","chart1 cuidado");
    }
    else if(dados2[5] >= 49.5 && dados2[5] <= 57.9){
        termometro2.className = termometro2.className.replaceAll("bom","atencao");
        grafico2.className = grafico2.className.replaceAll("chart1 bom","chart1 atencao");
    }
    
    const config2 = {
        type: 'line',
        data: data2,
        options: {
            plugins: {
            title: {
                display: true,
                text: 'Umidade capturada nos últimos 5 minutos'
            }
        }
        }
    };

    //GRÁFICO3

    const labels3 = [
        '00:00',
        '01:00',
        '02:00',
        '03:00',
        '04:00',
        '05:00',
        '06:00',
        '07:00',
        '08:00',
        '09:00',
        '10:00',
        '11:00',
        '12:00',
        '13:00',
        '14:00',
        '15:00',
        '16:00',
        '17:00',
        '18:00',
        '19:00',
        '20:00',
        '21:00',
        '22:00',
        '23:00'
    ]

    // DADOS
    var dados3temp = [30, 29, 36, 40, 55, 60,30, 29, 36, 40, 55, 60,30, 29, 36, 40, 55, 60,30, 29, 36, 40, 55, 60];
    var dados3umi = [18, 25, 28, 25, 22, 45,18, 25, 28, 25, 22, 45,18, 25, 28, 25, 22, 45,18, 25, 28, 25, 22, 45];
    const data3 = {
        labels: labels3,
        datasets: [{
            label: 'Umidade',
            backgroundColor: '#3E68FF',
            borderColor: '#3E68FF',
            data: dados3temp,
        },
        {
            label: 'Temperatura',
            backgroundColor: '#f76686',
            borderColor: '#f76686',
            data: dados3umi,
        }]
    }
    const config3 = {
        type: 'line',
        data: data3,
        options: {
            plugins: {
            title: {
                display: true,
                text: 'Dados capturados nas últimas 24 horas'
            }
        }
        }
    };

    //GRÁFICO4

    const labels4 = [
        'Alerta bom',
        'Alerta Atenção',
        'Alerta Cuidado',
        'Alerta Urgente'
    ]

    // DADOS
    var sevidor1 = [2,3,2,4];
    var sevidor2 = [2,3,4,4];
    var sevidor3 = [2,3,6,8];
    const data4 = {
        labels: labels4,
        datasets: [{
            label: 'Servidor 1 ',
            backgroundColor: '#3E68FF',
            borderColor: '#3E68FF',
            data: sevidor1,
        },
        {
            label: 'Servidor 2 ',
            backgroundColor: 'green',
            borderColor: 'green',
            data: sevidor2,
        },
        {
            label: 'Servidor 3 ',
            backgroundColor: 'violet',
            borderColor: 'violet',
            data: sevidor3,
        }]
    }
    const config4 = {
        type: 'bar',
        data: data4,
        options: {
            plugins: {
            title: {
                display: true,
                text: 'Contagem de alertas desparados por cada servidor'
            }
        }
        }
    };

    //CONSTS DE CRIAÇÃO 
    const myChart = new Chart(
        document.getElementById('myChart'),
        config
    );
    const myChart2 = new Chart(
        document.getElementById('myChart2'),
        config2
    );
    const myChart3 = new Chart(
        document.getElementById('myChart3'),
        config3
    );
    const myChart4 = new Chart(
        document.getElementById('myChart4'),
        config4
    );



    //MODAL
    function abrirModal1(){
        var fundo = document.getElementById("fundo_modal1");
        var modal = document.getElementById("modal1");

        fundo.style.zIndex = 999;
        modal.style.zIndex = 999;
        fundo.style.animation = "modal 1s";
        modal.style.animation = "modal 1s";
        fundo.style.transform = "translateY(0)";
        modal.style.transform = "translateY(0)";
    }
    function fecharModal1(){
        var fundo = document.getElementById("fundo_modal1");
        var modal = document.getElementById("modal1");

        fundo.style.animation = "fecharModal 1s";
        modal.style.animation = "fecharModal 1s";
        fundo.style.transform = "translateY(-200%)";
        modal.style.transform = "translateY(-200%)";
        
    }
    function abrirModal2(){
        var fundo = document.getElementById("fundo_modal2");
        var modal = document.getElementById("modal2");

        fundo.style.zIndex = 999;
        modal.style.zIndex = 999;
        fundo.style.animation = "modal 1s";
        modal.style.animation = "modal 1s";
        fundo.style.transform = "translateY(0)";
        modal.style.transform = "translateY(0)";
    }
    function fecharModal2(){
        var fundo = document.getElementById("fundo_modal2");
        var modal = document.getElementById("modal2");

        fundo.style.animation = "fecharModal 1s";
        modal.style.animation = "fecharModal 1s";
        fundo.style.transform = "translateY(-200%)";
        modal.style.transform = "translateY(-200%)";
        
    }
    function abrirModal3(){
        var fundo = document.getElementById("fundo_modal3");
        var modal = document.getElementById("modal3");

        fundo.style.zIndex = 999;
        modal.style.zIndex = 999;
        fundo.style.animation = "modal 1s";
        modal.style.animation = "modal 1s";
        fundo.style.transform = "translateY(0)";
        modal.style.transform = "translateY(0)";
    }
    function fecharModal3(){
        var fundo = document.getElementById("fundo_modal3");
        var modal = document.getElementById("modal3");

        fundo.style.animation = "fecharModal 1s";
        modal.style.animation = "fecharModal 1s";
        fundo.style.transform = "translateY(-200%)";
        modal.style.transform = "translateY(-200%)";
        
    }
    function abrirModal4(){
        var fundo = document.getElementById("fundo_modal4");
        var modal = document.getElementById("modal4");

        fundo.style.zIndex = 999;
        modal.style.zIndex = 999;
        fundo.style.animation = "modal 1s";
        modal.style.animation = "modal 1s";
        fundo.style.transform = "translateY(0)";
        modal.style.transform = "translateY(0)";
    }
    function fecharModal4(){
        var fundo = document.getElementById("fundo_modal4");
        var modal = document.getElementById("modal4");

        fundo.style.animation = "fecharModal 1s";
        modal.style.animation = "fecharModal 1s";
        fundo.style.transform = "translateY(-200%)";
        modal.style.transform = "translateY(-200%)";
        
    }
</script>
